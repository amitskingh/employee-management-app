<mat-card class="employee-card" appearance="outlined">
  <mat-card-header>
    <div class="card-headings">
      <mat-card-title>Employee Form</mat-card-title>
      <mat-card-subtitle>Please fill correct details!</mat-card-subtitle>
    </div>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="employee-form">
      <div>
        <mat-form-field class="employee-full-width">
          <mat-label>Name</mat-label>
          <input type="text" matInput formControlName="name" placeholder="Enter employee name" />

          @if((employeeForm.get('name')?.dirty || employeeForm.get('name')?.touched)){
          @if(employeeForm.get('name')?.hasError('required')){
          <div>
            <mat-error>Name is required</mat-error>
          </div>
          } @else if(employeeForm.get('name')?.hasError('minlength')){
          <mat-error>Minimum 3 characters required</mat-error>
          } }
        </mat-form-field>
      </div>

      <div>
        <mat-form-field class="employee-full-width">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" placeholder="Enter email" />

          @if((employeeForm.get('email')?.dirty || employeeForm.get('email')?.touched)){
          @if(employeeForm.get('email')?.hasError('required')){
          <mat-error>Email is required</mat-error>
          } @else if(employeeForm.get('email')?.hasError('email')){
          <mat-error>Invalid email format</mat-error>
          } }
        </mat-form-field>
      </div>

      <div>
        <mat-form-field class="employee-full-width">
          <mat-label>Age</mat-label>
          <input matInput type="number" formControlName="age" placeholder="Enter age" />
          @if((employeeForm.get('age')?.dirty || employeeForm.get('age')?.touched)){
          @if(employeeForm.get('age')?.hasError('required')){
          <mat-error>Age is required</mat-error>
          } @else if(employeeForm.get('age')?.hasError('invalid')){
          <mat-error>Invalid age format</mat-error>
          } @else if(employeeForm.get('age')?.hasError('min')){
          <mat-error>Minimum age is 18</mat-error>
          } @else if(employeeForm.get('age')?.hasError('max')){
          <mat-error>Maximum age is 60</mat-error>
          }}
        </mat-form-field>
      </div>

      <div>
        <mat-form-field class="employee-full-width">
          <mat-label>Department</mat-label>
          <mat-select formControlName="department">
            <mat-option value="angular">Angular</mat-option>
            <mat-option value="react">React</mat-option>
            <mat-option value="node">Node</mat-option>
          </mat-select>

          @if((employeeForm.get('department')?.dirty || employeeForm.get('department')?.touched)){
          @if(employeeForm.get('department')?.hasError('required')){
          <mat-error>Department is required</mat-error>
          } }
        </mat-form-field>
      </div>

      <div formArrayName="skills">
        @for (skill of skills.controls; track skill) {
        <div [formGroupName]="$index">
          <mat-form-field>
            <mat-label>Skill {{ $index + 1 }}</mat-label>
            <input matInput formControlName="skill" placeholder="Enter skill" />

            @if(skills.at($index).get('skill')?.dirty || skills.at($index).get('skill')?.touched){
            @if(skills.at($index).get('skill')?.hasError('required')){
            <mat-error>Skill is required</mat-error>
            } }
          </mat-form-field>
          <button mat-mini-fab color="warn" type="button" (click)="removeSkill($index)">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
        }
        <button matButton="tonal" type="button" (click)="addSkill()">Add Skill</button>
      </div>

      <div>
        <button matButton="filled" type="submit" class="mt-4">Submit</button>
        <button matButton="tonal" type="reset" class="mt-4">Reset</button>
      </div>
    </form>
  </mat-card-content>
  <!-- <mat-card-actions>
    <button matButton>LIKE</button>
    <button matButton>SHARE</button>
  </mat-card-actions> -->
</mat-card>
